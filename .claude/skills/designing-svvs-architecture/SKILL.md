---
name: svvs-architecture
description: ObservationベースのStore/View/ViewStateによるシンプルで明示的なSwiftUIアーキテクチャ。UIロジックをViewから切り離し、単一のソースオブトゥルース(Store)で状態管理を行う。
---

# SVVS Architecture (Observation版)

**Use when**:
- Store/ViewState/Viewの3層構造を設計・実装する前に**必ず読む**
- 新しい画面やフィーチャーのアーキテクチャを決定する前
- 状態管理やビジネスロジックの配置を検討する時

SVVS（Store / View / ViewState）は、SwiftUIでUIロジックを整理し、データフローを明確にするための軽量アーキテクチャです。

## アーキテクチャの全体像

```
┌─────────────────────────────────────────┐
│              Repository                  │  データ層の抽象化
│  (データソースへの統一インターフェース)    │
└────────────────┬────────────────────────┘
                 │
                 ▼
┌─────────────────────────────────────────┐
│               Store                      │  単一のソースオブトゥルース
│  • @Observable で状態を自動追跡          │  ビジネスロジックと状態管理
│  • Repository経由でデータ操作            │
│  • シンプルな状態の更新                  │
└────────────────┬────────────────────────┘
                 │ 状態の監視
                 ▼
┌─────────────────────────────────────────┐
│            ViewState                     │  UI状態の派生と管理
│  • @Observable で状態を保持             │  表示ロジックの集約
│  • Storeの状態を監視・変換              │
│  • フィルタリング/ソート等の派生状態    │
└────────────────┬────────────────────────┘
                 │ 状態のバインディング
                 ▼
┌─────────────────────────────────────────┐
│               View                       │  純粋な表示層
│  • @State でViewStateを保持             │  ユーザーインタラクション
│  • イベントをViewStateへ伝達            │
│  • 宣言的UI描画のみ                     │
└─────────────────────────────────────────┘
```
